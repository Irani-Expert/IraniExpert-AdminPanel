<div class="card container pb-2 pt-2">
  <form [formGroup]="addForm">
    <div class="row">
      <div class="col-md-6 form-group mb-3">
        <label for="title">عنوان</label>
        <input
          type="text"
          class="form-control form-control-rounded"
          id="title"
          placeholder="عنوان را وارد نمایید."
          [formControl]="addForm.controls['title']"
          [(ngModel)]="addUpdate.title"
        />
        <small
          *ngIf="
            addForm.controls['title'].hasError('required') &&
            addForm.controls['title'].touched
          "
          class="mat-text-warn m-t-negative"
          >ورود عنوان ضروری است</small
        >
      </div>

      <div class="col-md-6 form-group mb-3">
        <label for="brief">متن کوتاه</label>
        <input
          type="text"
          class="form-control form-control-rounded"
          id="brief"
          placeholder="متن کوتاه را وارد نمایید."
          [formControl]="addForm.controls['brief']"
          [(ngModel)]="addUpdate.brief"
        />
        <small
          *ngIf="
            addForm.controls['brief'].hasError('required') &&
            addForm.controls['brief'].touched
          "
          class="mat-text-warn m-t-negative"
          >ورود عنوان ضروری است</small
        >
      </div>

      <div class="col-md-3 form-group mb-3">
        <label for="picker1">انتخاب گروه</label>
        <select
          [formControl]="addForm.controls['groupID']"
          class="form-control form-control-rounded"
          (ngModelChange)="selectGroup($event)"
          [ngModel]="addUpdate.groupID"
          *ngFor="let item of groupList"
        >
          <option value="{{ item.value }}">{{ item.title }}</option>
        </select>
        <small
          *ngIf="
            addForm.controls['groupID'].hasError('required') &&
            addForm.controls['groupID'].touched
          "
          class="mat-text-warn m-t-negative"
          >انتخاب نوع گروه ضروری است</small
        >
      </div>

      <div class="col-md-12 form-group mb-3">
        <ckeditor
          [formControl]="addForm.controls['description']"
          [(ngModel)]="addUpdate.description"
          name="myckeditor"
          required
          [config]="ckeConfig"
          debounce="500"
          (paste)="onPasteEditor($event)"
          (change)="onChangeEditor($event)"
        >
        </ckeditor>
        <small
          *ngIf="
            addForm.controls['description'].hasError('required') &&
            addForm.controls['description'].touched
          "
          class="mat-text-warn m-t-negative"
          >توضیحات ضروری است</small
        >
      </div>
      <div class="col-md-12 form-group mb-3">
        <div class="row">
          <img-cropper
            class="col-4 text-start d-inline-block"
            [image]="image"
            [settings]="cropperSettings"
          ></img-cropper>

          <!-- show image from addupdate.filtePath -->
          <img
            class="col-8 mt-5"
            *ngIf="image?.image"
            [src]="image?.image"
            [width]="cropperSettings.croppedWidth"
            [height]="cropperSettings.croppedHeight"
          />
        </div>

        <div class="col-12 mt-2">
          <button
            type="button"
            class="btn btn-rounded btn-outline-dark"
            (click)="uploadFile(image)"
          >
            آپلود کن
          </button>
        </div>
      </div>

      <div class="col-md-12 form-group mb-3">
        <label class="switch switch-primary mr-3">
          <span>فعال/غیرفعال</span>
          <input
            [(ngModel)]="addUpdate.isActive"
            [formControl]="addForm.controls['isActive']"
            type="checkbox"
          />
          <span class="slider"></span>
        </label>
      </div>
    </div>

    <button
      type="button"
      class="btn btn-outline-dark btn-rounded"
      (click)="modal.close(true)"
      *ngIf="addUpdate.id !== 0"
      [disabled]="!addForm.valid"
      (click)="addOrUpdate(addUpdate)"
    >
      ویرایش
    </button>
    <button
      type="button"
      class="btn btn-outline-dark btn-rounded"
      *ngIf="addUpdate.id === 0"
      [disabled]="!addForm.valid"
      (click)="addOrUpdate(addUpdate)"
    >
      ذخیره
    </button>
    <button
      type="button"
      class="btn btn-outline-dark btn-rounded"
      [routerLink]="'/cnt/article'"
    >
      انصراف
    </button>
  </form>
</div>
