<div
  class="updateNoteBar"
  *ngIf="toggled"
  (click)="clearNote()"
  (click)="updateNotebar()"
></div>

<div class="row g-0 p-0 m-0">
  <div class="col-12 row g-0 p-0 flex-row mb-2">
    <div class="col-auto mb-2">
      <button
        class="btn btn-secondary"
        (click)="getUserNeedByUserWant(null, 0)"
      >
        آخرین درخواست ها
      </button>
    </div>
    <div class="col-auto mb-2">
      <button class="btn btn-primary" (click)="getUserNeedByUserWant(0, 0)">
        دمو
      </button>
    </div>
    <div class="col-auto mb-2">
      <button class="btn btn-dark" (click)="getUserNeedByUserWant(1, 0)">
        مشاوره
      </button>
    </div>

    <div class="col-auto mb-2">
      <button
        class="btn btn-dark-yellow text-white"
        (click)="getUserNeedByUserWant(2, 0)"
      >
        مشارکت در سود
      </button>
    </div>
    <div class="col-auto mb-2">
      <button
        class="btn btn-green text-white"
        (click)="getUserNeedByUserWant(3, 0)"
      >
        نمایشگاه
      </button>
    </div>
  </div>

  <button class="btn bg-dark text-white" (click)="openFilterModal(filterModal)">
    فیلتر کردن
  </button>
</div>
<div class="my-css d-flex flex-wrap w-100 pb-5">
  <div id="comments" class="w-100">
    <div
      class="my-2"
      *ngFor="
        let item of rows
          | paginate
            : {
                itemsPerPage: page.size,
                page: page.pageNumber,
                currentPage: page.pageNumber,
                totalItems: page.totalElements
              }
      "
    >
      <div class="timeline-card card mt-4">
        <div
          class="card-header bg-light-dark d-flex justify-content-between align-items-center comment-header-border"
        >
          <div class="mb-1">
            <strong class="mr-1 text-white"
              >&nbsp;{{ item.firstName }}&nbsp;{{ item.lastName }}</strong
            >

            <p class="text-white-50">&nbsp;{{ item.userWant | userWants }}</p>
          </div>
        </div>
        <div class="card-body bg-gray">
          <div class="row p-3">
            <div class="col-md-6">
              <label for="FullName" class="text-white d-block"
                >ایمیل و شماره تماس</label
              >
              <strong class="mr-1 text-white"
                >{{ item.email }}<br />{{ item.phoneNumber }}
              </strong>
            </div>
            <div class="col-md-6">
              <label for="FullName" class="text-white d-block"
                >تاریخ ایجاد</label
              >
              <strong class="mr-1 text-white">{{ item.createDate }}</strong>
            </div>
          </div>
        </div>
        <div class="card-footer bg-gray">
          <div class="mb-2 d-flex justify-content-end">
            <button
              type="button"
              class="btn-light btn d-inline-flex justify-content-around py-btns radius align-items-center"
              (click)="toggleNotebar(item.id)"
            >
              <i class="i-Pen-5 text-bigger mr-2"></i>
              <strong class="ml-2 text-small">یادداشت</strong>
            </button>
            <button
              type="button"
              (click)="deleteUserNeed(item.id, deleteModal)"
              class="btn-delete btn d-inline-flex justify-content-around py-btns radius align-items-center ml-2"
            >
              <i class="i-Close text-bigger mr-2"></i>
              <strong class="ml-2 text-small">حذف پیام</strong>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- <div class="col-md-4 col-12 p-0" *ngIf="rows?.length != 0">
    <div class="p-0 position-sm auther-start" id="scrollPart">
      <div class="p-0 note-height">
        <div class="card-header bg-light-dark pl-0 add-comment-header-border">
          <div class="p-2"><h4 class="pl-2 text-white">یادداشت ها</h4></div>
        </div>
        <div
          class="card-body comment-scroll bg-gray minimum-height"
          id="scrollbar2"
        >
          <div class="my-css">
            <div>
              <div
                class="timeline-card card mt-2"
                *ngFor="let item of commentRows"
              >
                <div class="card-header bg-dark m-0 p-0">
                  <p class="text-white m-0 p-2">{{ item.name }}</p>
                </div>
                <div class="card-body bg-secondary">
                  <p class="text-white">
                    {{ item.text }}
                  </p>
                  <div class="row">
                    <div class="col">
                      <p class="text-white" maxlength="5">
                        {{ item.createDate | date : "   yyyy/M/d, h:mm " }}
                      </p>
                    </div>
                    <div class="col d-flex justify-content-end">
                      <p class="text-white" maxlength="5">
                        {{ item.jalaliDate }}
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="card-footer bg-gray note-footer">
          <div class="ml-3" *ngIf="rowIdKeeper != null">
            <form action="">
              <div class="row">
                <div class="col-10 form-group mb-3 mt-3">
                  <label class="text-white" for="title">ایجاد یادداشت</label>
                  <textarea
                    type="text"
                    class="form-control bg-dark textarea-font"
                    [(ngModel)]="addComentText"
                    name="addComentToUserNeed"
                  ></textarea>
                </div>
              </div>
            </form>
            <button
              type="button"
              class="btn btn-light mb-2"
              (click)="addComent()"
              [disabled]="addComentText == '' || rowIdKeeper == null"
            >
              ایجاد
            </button>
          </div>
        </div>
      </div>
    </div>

    <div></div>
  </div> -->
</div>

<div *ngIf="rows?.length == 0" class="d-flex justify-content-center">
  <img
    src="../../../../../assets/images/97434-no-data-available.gif"
    class="img-fluid w-50"
    style="opacity: 0.4"
    alt=""
  />
</div>
<ng-template #deleteModal let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">
      آیا از حذف درخواست مطمئن هستید
    </h4>
    <button
      (click)="modal.dismiss()"
      type="button"
      class="close"
      aria-label="Close"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

  <div class="modal-footer">
    <button
      type="button"
      class="btn-delete btn d-inline-flex justify-content-around py-btns radius align-items-center"
      (click)="modal.close(true)"
    >
      <i class="i-Yes text-bigger mr-2"></i><strong>بله</strong>
    </button>
    <button
      type="button"
      class="btn-save btn d-inline-flex justify-content-around py-btns radius align-items-center ml-2"
      (click)="modal.dismiss()"
    >
      <i class="i-Close text-bigger mr-2"></i><strong>خیر</strong>
    </button>
  </div>
</ng-template>
<!-- <div
  [ngClass]="{ open: _UserNeedService.sidebarState.sidenavOpen }"
  class="notebar-left rtl-ps-none bg-light-dark rounded-4 shadow-lg"
  [perfectScrollbar]="{ suppressScrollX: true }"
>
 <div class="mt-4 ml-3">
    <i
      (click)="updateNotebar()"
      ngbTooltip="بستن"
      [openDelay]="100"
      [closeDelay]="500"
      placement="bottom"
      class="i-Close bg-white text-dark border-0 clickable-btn rounded-circle"
    ></i>
  </div>

  <hr class="separator-breadcrumb mt-2 mb-1" />
  <div class="p-2"><h4 class="pl-2 text-light">یادداشت ها</h4></div>
  <ul class="aside-left">
    <li class="aside-item lvl1">
      <div class="aside-item-hold">
        <div class="my-css">
          <div>
            <div class="timeline-card card mt-2">
              <div class="card-header bg-dark m-0 p-0">
                <p class="text-white m-0 p-2">یادداشت شماره 1</p>
              </div>
              <div class="card-body bg-secondary">
                <p class="text-white" *ngIf="toggled == true">
                  {{ note.phoneNumber }}
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </li>
  </ul>
  <hr class="separator-breadcrumb mt-0 mb-1" />
  <div class="ml-3">
    <form action="">
      <div class="row">
        <div class="col-10 form-group mb-3 mt-3">
          <label class="text-white" for="title">ایجاد یادداشت</label>
          <textarea
            type="text"
            class="form-control bg-dark textarea-font"
          ></textarea>
        </div>
      </div>
    </form>
    <button type="button" class="btn btn-light mb-2">ایجاد</button>
  </div>
</div> -->
<!-- [ngClass]="sideBarNoteStatus ? 'd-block' : 'd-none'" -->
<!-- Note Model -->

<!-- <div
  [ngClass]="{ open: _UserNeedService.sidebarState.sidenavOpen }"
  class="notebar-left rtl-ps-none bg-lightdark shadow-lg my-webKit"
  style="overflow-y: auto"
>
  <div class="mt-3 ml-3 mb-3">
    <i
      (click)="clearNote()"
      (click)="updateNotebar()"
      ngbTooltip="بستن"
      [openDelay]="100"
      [closeDelay]="500"
      placement="bottom"
      class="i-Close bg-dark text-white border-0 clickable-btn rounded-circle"
    ></i>
  </div>

  <div class="ml-3">
    <form action="">
      <div class="row g-0 p-0 m-0">
        <div class="col-lg-12 col-md-11 col-10 form-group mb-3 mt-3">
          <label class="text-white" for="title">ایجاد یادداشت</label>
          <textarea
            name="title"
            id="title"
            type="text"
            [(ngModel)]="note.text"
            class="form-control bg-white text-dark textarea-font"
          ></textarea>
        </div>
      </div>
    </form>
  </div>
  <div class="d-flex justify-content-end mr-3">
    <button
      [disabled]="
        note.text == '' ||
        note.text == ' ' ||
        note.text == '  ' ||
        note.text == '   ' ||
        note.text == '    '
      "
      type="button"
      (click)="openConfirmationModal(note, confirmationModal)"
      class="btn btn-secondary mb-2"
      *appCanAccess="'note-Add'"
    >
      ایجاد
    </button>
  </div>

  <hr class="separator-breadcrumb mt-2 mb-1" />
  <div class="p-2"><h4 class="text-white">یادداشت ها</h4></div>
  <ul class="aside-left">
    <li class="aside-item lvl1">
      <div class="aside-item-hold">
        <div class="my-css">
          <div
            *ngFor="let item of notes"
            class="timeline-card rounded-4 bg-notes shadow-lg card mt-2"
          >
            <p class="bg-notes-header rounded-alt p-2">{{ item.name }}</p>
            <p class="text-black">
              <b>
                {{ item.text }}
              </b>
            </p>

            <div class="text-black mt-2 p-2 pb-0">
              <smaller class="m-1" maxlength="5"
                >{{ item.createDate | date : "   yyyy/M/d, h:mm " }},</smaller
              >
              <smaller class="m-1" maxlength="5">{{ item.jalaliDate }}</smaller>
            </div>
          </div>
        </div>
      </div>
    </li>
  </ul>
</div> -->
<div
  [ngClass]="{ open: _UserNeedService.sidebarState.sidenavOpen }"
  class="notebar-left rtl-ps-none bg-lightdark shadow-lg my-webKit"
  style="overflow-y: auto"
>
  <div class="mt-3 ml-3 mb-3">
    <i
      (click)="clearNote()"
      (click)="updateNotebar()"
      ngbTooltip="بستن"
      [openDelay]="100"
      [closeDelay]="500"
      placement="bottom"
      class="i-Close bg-dark text-white border-0 clickable-btn rounded-circle"
    ></i>
  </div>
  <hr class="separator-breadcrumb mt-0 mb-1" />
  <div class="ml-3">
    <form action="">
      <div class="row g-0 p-0 m-0">
        <div class="col-lg-12 col-md-11 col-10 form-group mb-3 mt-3">
          <label class="text-white" for="title">ایجاد یادداشت</label>
          <textarea
            name="title"
            id="title"
            type="text"
            [(ngModel)]="note.text"
            class="form-control bg-white text-dark textarea-font"
          ></textarea>
        </div>
      </div>
    </form>
    <div class="d-flex justify-content-end mr-3">
      <button
        [disabled]="
          note.text == '' ||
          note.text == ' ' ||
          note.text == '  ' ||
          note.text == '   ' ||
          note.text == '    '
        "
        type="button"
        (click)="openConfirmationModal(note, confirmationModal)"
        class="btn-add btn d-inline-flex justify-content-around py-btns radius align-items-center mb-2"
        *appCanAccess="'note-Add'"
      >
        <i class="i-Add text-bigger mr-2"></i><strong>ایجاد</strong>
      </button>
    </div>
  </div>
  <hr class="separator-breadcrumb mt-2 mb-1" />
  <div class="p-2"><h4 class="pl-2 text-light text-small">یادداشت ها</h4></div>
  <ul class="aside-left">
    <li class="aside-item lvl1">
      <div class="aside-item-hold">
        <div class="my-css">
          <div>
            <ng-container *ngFor="let item of notes">
              <div
                class="timeline-card rounded-4 bg-notes shadow-lg card mt-2"
                *ngIf="toggled == true"
              >
                <div class="rounded-alt bg-notes-header m-0 p-0">
                  <div class="d-flex justify-content-between">
                    <p class="m-0 p-2">{{ item.name }}</p>
                  </div>
                </div>
                <div class="card-body">
                  <b class="text-black">
                    {{ item.text }}
                  </b>
                </div>
                <div class="text-black mt-2 p-2 pb-0">
                  <smaller class="m-1"
                    >{{
                      item.createDate | date : "  h:mm , yyyy/M/d "
                    }},</smaller
                  >
                  <smaller class="m-1">{{ item.jalaliDate }}</smaller>
                </div>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
    </li>
  </ul>
</div>

<!-- Add Modal -->
<!-- <ng-template #confirmationModal let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-title">ایجاد</h4>
    <button
      ngbAutofocus
      type="button"
      class="close"
      aria-label="Close button"
      aria-describedby="modal-title"
      (click)="modal.dismiss('Cross click')"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <p><strong>آیا از ایجاد این یادداشت مطمئنید؟</strong></p>
  </div>
  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-outline-secondary btn-rounded mr-1"
      (click)="modal.dismiss('cancel')"
    >
      خیر
    </button>
    <button
      type="button"
      class="btn btn-wide btn-success btn-rounded"
      (click)="modal.close(true)"
    >
      بله
    </button>
  </div>
</ng-template>

<ng-template #deletingModal let-modal>
  <div class="shadow-lg">
    <div class="modal-header">
      <h4 class="modal-title" id="modal-title">حذف</h4>
      <button
        type="button"
        class="close"
        aria-label="Close button"
        aria-describedby="modal-title"
        (click)="modal.dismiss('Cross click')"
      >
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <p><strong>آیا از حذف مطمئنید؟</strong></p>
    </div>
    <div class="modal-footer">
      <button
        type="button"
        class="btn btn-outline-secondary btn-rounded mr-1"
        (click)="modal.dismiss('cancel')"
      >
        خیر
      </button>
      <button
        type="button"
        ngbAutofocus
        class="btn btn-wide btn-danger btn-rounded"
        (click)="modal.close('Ok')"
      >
        بله
      </button>
    </div>
  </div>
</ng-template> -->

<ng-template #filterModal let-modal>
  <div class="bg--gray px-3">
    <div class="modal-header row">
      <h4 class="modal-title text-white">فیلتر</h4>

      <button
        type="button"
        class="close text-white"
        aria-label="Close"
        (click)="modal.dismiss()"
      >
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
  </div>

  <label>فعلا فقط نام (بدون فامیل)</label>
  <input type="text" [(ngModel)]="filterModel.firstName" />
  <button type="button" (click)="[start(), modal.dismiss()]">ثبت</button>
</ng-template>
