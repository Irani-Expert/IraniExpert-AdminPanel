<div class="row g-0 p-0 m-0">
  <div class="col-12 row g-0 p-0 flex-row mb-2">
    <div class="col-auto mb-2">
      <button class="btn btn-primary" (click)="getAllCommission(3)">
        بازار یاب
      </button>
    </div>
    <div class="col-auto mb-2">
      <button class="btn bg-dark text-white " (click)="getAllCommission(2)">
        مدیر فروش
      </button>
    </div>



  </div>
</div>

<section class="main-table">
  <table class="table">
    <thead class="bg-dark text-white">
      <tr>
        <th>نام</th>
        <th>نام خانوادگی</th>
        <th>کمیسیون</th>
        <th>باقی مانده</th>
        <th class="rounded--left">رسید ها</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let item of rows">
        <td>{{ item.firstName }}</td>
        <td>{{ item.lastName }}</td>
        <td class="money-color">{{ item.commission | number : "1.2-2" }}</td>
        <td class="text-danger">{{ item.remainCommission | number : "1.2-2" }}</td>

        <td class="td-oprate">
          <button
            (click)="openModal(addReceiptModal, 'lg', item.contractID)"
            class="btn btn-dark-yellow text-white"
            type="button"
          >
            افزودن رسید پرداخت
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</section>
<ng-template #addReceiptModal let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-title">رسید</h4>
    <button
      type="button"
      class="close"
      aria-label="Close button"
      aria-describedby="modal-title"
      (click)="modal.close()"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <button
      (click)="openModal(openDetails, 'lg')"
      class="btn btn-success text-white m-2 p-0 shadow-md" 
      type="button"
    >
    <a class="btn p-1  " href="#"><i class="i-Dollar-Sign-2 btn-blue-right-section  m-0  p-1 d-grid text-white"></i></a>
    <a class="btn  p-1 text-white " href="#">افزودن رسید</a>
    </button>
  

    <table class="shadow">
      <thead class="bg-dark table-header text-white" >
        <tr>
          <th>تاریخ</th>
          <th>هزینه</th>
          <th>مرحله پرداخت</th>
          <th>شماره سریال</th>
          <th>توضیحات</th>
        </tr>
      </thead>
      <drag-scroll class="" drag-scroll-x-disabled="true"> 
      <tbody class="table-body drag-scroll-item drag-scroll-x-disabled">
        <tr class="tr-modal"
          *ngFor="
            let item of Receipt
              | paginate
                : {
                    itemsPerPage: page.size,
                    page: page.pageNumber - 1,
                    currentPage: page.pageNumber - 1,
                    totalItems: page.totalElements
                  }
          "
        >
          <td>{{ item.paymentDate }} <i class="i-Clock"></i></td>
          <td>{{ item.price }}</td>
          <td>{{ item.paymentStep }}</td>
          <td class="td-modal">
            <ng-template #tipContent><div class="tooltip-size">{{ item.serialNumber }}</div></ng-template>
            
            <div class="card shadow  "  animation="true" tooltipClass="my-custom-class" [openDelay]="200"
            [closeDelay]="500" placement="bottom" [ngbTooltip]="tipContent" >
              <div class="card-body bg-warning text-white c-poiter" (click)="copyText(item.serialNumber);">
                {{ item.serialNumber }}
              </div>
            </div>
          </td>
          <td class="pt-2">
            <button
              (click)="descriptionfunc(description, item.description)"
              class="mt-2 h-75 col-5 btn btn-info text-white rounded-circle shadow"
              type="button"
            >
            <i class="i-Pen-5" style="font-size: 1.2rem;     display: flex;
            justify-content: center;
            align-items: center;"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </drag-scroll>

    </table>
  </div>

  <div class="modal-footer">
    <div class="col-md-12 mt-3" *ngIf="rows?.length > 0">
      <pagination-controls
        (pageChange)="setPage($event)"
        previousLabel=""
        nextLabel=""
      ></pagination-controls>
    </div>
  </div>
</ng-template>
<ng-template #openDetails let-modal>
  <div style="   background: linear-gradient(-45deg, #f29274, #d81e65, #375a67, #67ffdb);
  background-size: 400% 400%;
  animation: gradient 15s ease infinite;">
    <div class="d-flex flex-column justify-content-center w-100 h-100">
      <div>
    
  
        <div class=" col-3 p-3" style=" display: flex;
        align-items: center;
        justify-content: center;">
        <div class="bg-warning shadow rounded-circle text-center col-5 p-2  " style="
        display: flex;
        justify-content: center;
        align-items: center;
    " >
          <i class="i-Dollar-Sign-2 p-2 text-white" style="
          font-size: 30px;
  font-weight: bold;"></i>
        </div>
      </div>
  
    <div class="row m-2"> 
      <form [formGroup]="addRedeiptForm" class="col-5">
      <div class="col-12 form-group mb-3">
        <strong for="totalPrice" class="mb-3">میزان پرداخت</strong>
        <input
          class="form-control"
          id="totalPrice"
          [(ngModel)]="price"
          [formControl]="addRedeiptForm.controls['price']"
        />
      </div>
      <div class="col-12 form-group mb-3" dir="ltr">
        <strong for="expireDate" class="mb-3">تاریخ</strong>
  
        <input
          (click)="e.toggle()"
          type="text"
          class="form-control"
          ngbDatepicker
          #e="ngbDatepicker"
          [(ngModel)]="addDate"
          [formControl]="addRedeiptForm.controls['paymentDate']"
        />
      </div>
  </form>
  <div class="col-7 form-group mt-2 " dir="ltr">
    <strong for="expireDate" class="mb-3">توضیحات</strong>
    <textarea
      name=""
      cols="30"
      rows="4"
      type="text"
      class="form-control"
      id="description"
      [(ngModel)]="addReceiptModel.description"
      [formControl]="addRedeiptForm.controls['description']"
      maxlength="500"
    >
    </textarea>
  </div>
  </div>
    
    <div class="modal-footer">
      <button
        type="button"
        class="btn btn-outline-dark btn-rounded"
        (click)="addNewReceipt()"
      >
        تائید
      </button>
    </div>
  </div>
    </div>
  
  </div>

 
</ng-template>

<ng-template #description let-modal>
  <!-- <div>
    <div class="modal-header">
      <h4 class="modal-title">توضیحات</h4>
      <button
        type="button"
        class="close"
        aria-label="Close"
        (click)="modal.dismiss('Cross click')"
      >
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
   
    <div class="modal-body">
      <p class="description-border"></p>
      <div class="modal-footer"></div>
    </div>
  </div> -->
  <div class="notepad">
    <div class="top"></div>
    <div class="paper" contenteditable="true">
      لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم از صنعت چاپ، و با استفاده از طراحان گرافیک است، چاپگرها و متون بلکه روزنامه و مجله در ستون و سطرآنچنان که لازم است، و برای شرایط فعلی تکنولوژی مورد نیاز، و کاربردهای متنوع با هدف بهبود ابزارهای کاربردی می باشد، کتابهای زیادی در شصت و سه درصد گذشته حال و آینده، شناخت فراوان جامعه و متخصصان را می طلبد، تا با نرم افزارها شناخت بیشتری را برای طراحان رایانه ای علی الخصوص طراحان خلاقی، و فرهنگ پیشرو در زبان فارسی ایجاد کرد، در این صورت می توان امید داشت که تمام و دشواری موجود در ارائه راهکارها، و شرایط سخز شامل حروفچینی دستاوردهای اصلی، و جوابد.
    </div>
  </div>
  
</ng-template>
