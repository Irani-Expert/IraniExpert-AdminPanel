<div class="d-flex justify-content-center">
  <input
    type="text"
    placeholder="نام کشور"
    class="form-control radius"
    [(ngModel)]="filter.name"
    (keydown.enter)="filterWithEnter($event.target.value)"
  />
  <button
    type="button"
    ngbAutofocus
    class="btn-filter btn d-inline-flex justify-content-around py-btns radius align-items-center mx-2"
    (click)="setFilter()"
  >
    <i class="i-Magnifi-Glass1 text-bigger mr-2"></i>
    <strong class="text-small">جستجو </strong>
  </button>
</div>

<div
  class="d-flex flex-row flex-wrap justify-content-center mt-3"
  *ngIf="countries?.length >= 1"
>
  <ng-container *ngFor="let country of countries">
    <div
      class="p-3 bg-white radius shadow-lg mx-3 my-2 col-10 col-sm-auto"
      (click)="openDetailModal(detailsModal, country)"
    >
      <div
        class="d-flex radius align-items-center justify-content-center flex-column"
      >
        <span
          class="shadow-lg fi"
          [ngClass]="'fi-' + country.codeFlag"
          style="font-size: 7.8rem; border-radius: 6px"
        ></span>
        <span class="text-small mt-3"
          ><strong>{{ country.name }}</strong></span
        >
      </div>
      <div class="d-flex flex-column mt-1 flex-wrap">
        <!-- Each Value -->
        <div class="d-flex flex-column mt-1">
          <div class="d-flex align-items-center justify-content-start mb-1">
            <span
              class="pi pi-circle-fill text-light m-1"
              style="font-size: 0.72rem"
            ></span
            ><label class="my-1 text-small" for="type">شناسه</label>
          </div>
          <span
            class="card d-inline-flex py-1 px-2 bg-light"
            style="border-radius: 3px"
            ><strong class="text-small"> {{ country.id }} </strong></span
          >
        </div>
        <!-- Each Value -->
        <!-- Each Value -->
        <div class="d-flex flex-column mt-1">
          <div class="d-flex align-items-center justify-content-start mb-1">
            <span
              class="pi pi-circle-fill text-light m-1"
              style="font-size: 0.72rem"
            ></span
            ><label class="my-1 text-small" for="type">کد کشور</label>
          </div>
          <span
            class="card d-inline-flex py-1 px-2 bg-light"
            style="border-radius: 3px"
            ><strong class="text-small"> {{ country.code }} </strong></span
          >
        </div>
        <!-- Each Value -->
        <!-- Each Value -->
        <div class="d-flex flex-column mt-1">
          <div class="d-flex align-items-center justify-content-start mb-1">
            <span
              class="pi pi-circle-fill text-light m-1"
              style="font-size: 0.72rem"
            ></span
            ><label class="my-1 text-small" for="type">ارز و نماد ارز</label>
          </div>
          <span
            class="card d-inline-flex py-1 px-2 bg-light"
            style="border-radius: 3px"
            ><strong class="text-small"
              >{{ country.currency }}&nbsp;-&nbsp;{{
                country.currencySymbol
              }}</strong
            ></span
          >
        </div>
        <!-- Each Value -->
      </div>
    </div>
  </ng-container>
</div>
<div *ngIf="countries?.length == 0" class="d-flex justify-content-center">
  <img
    src="../../../../../assets/images/97434-no-data-available.gif"
    class="img-fluid w-50 radius-lg"
    style="opacity: 0.4"
    alt=""
  />
</div>
<ng-template let-modal #detailsModal>
  <div class="shadow-lg radius d-flex flex-column flex-wrap">
    <div class="modal-header border-0">
      <span class="d-inline-flex align-items-center">
        <span class="pi pi-circle-fill text-light text-bigger"></span
        >&nbsp;&nbsp;
        <strong class="text-bigger">ویرایش</strong>
      </span>

      <button
        ngbAutoFocus
        type="button"
        class="close"
        aria-label="Close"
        (click)="modal.dismiss()"
      >
        <span style="font-size: 1.7rem" aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body pt-2">
      <div class="row-model">
        <div class="d-flex flex-column flex-wrap">
          <div class="align-self-center mb-2">
            <span
              class="shadow-lg fi"
              [ngClass]="'fi-' + countryDetail.codeFlag"
              style="font-size: 5.8rem; border-radius: 6px"
            ></span>
          </div>
          <!-- Each Value -->
          <div class="d-flex flex-column mr-4 mb-3">
            <span class="my-1 d-inline"
              ><strong class="text-small">شناسه</strong></span
            >
            <div class="d-flex flex-row ml-1 flex-wrap align-items-center">
              <span
                class="pi pi-circle-fill text-primary m-1"
                style="font-size: 0.82rem"
              ></span>
              <input
                disabled
                type="text"
                class="form-control radius text-small border-0"
                value="{{ countryDetail.id }}"
              />
            </div>
          </div>
          <!-- Each Value -->
          <!-- Each Value -->
          <div class="d-flex flex-column mr-4 mb-3">
            <span class="my-1 d-inline"
              ><strong class="text-small">کد کشور</strong></span
            >
            <div class="d-flex flex-row ml-1 flex-wrap align-items-center">
              <span
                class="pi pi-circle-fill text-primary m-1"
                style="font-size: 0.82rem"
              ></span>
              <input
                disabled
                type="text"
                class="form-control radius text-small border-0"
                value="{{ countryDetail.code }}"
              />
            </div>
          </div>
          <!-- Each Value -->
          <!-- Each Value -->
          <div class="d-flex flex-column mr-4 mb-1">
            <span class="my-1 d-inline"
              ><strong class="text-small">نام کشور(فارسی)</strong></span
            >
            <div class="d-flex flex-row ml-1 flex-wrap align-items-center">
              <span
                class="pi pi-circle-fill text-primary m-1"
                style="font-size: 0.82rem"
              ></span>
              <input
                (input)="changeValue('name', $event.target.value)"
                type="text"
                class="form-control radius text-small border-0"
                value="{{ countryDetail.name }}"
              />
            </div>
          </div>
          <!-- Each Value -->

          <!-- Each Value -->
          <div class="d-flex flex-column mr-4 mb-1">
            <span class="my-1 d-inline"
              ><strong class="text-small">ارز</strong></span
            >
            <div class="d-flex flex-row ml-1 flex-wrap align-items-center">
              <span
                class="pi pi-circle-fill text-primary m-1"
                style="font-size: 0.82rem"
              ></span>
              <input
                (input)="changeValue('currency', $event.target.value)"
                type="text"
                class="form-control radius text-small border-0"
                value="{{ countryDetail.currency }}"
              />
            </div>
          </div>
          <!-- Each Value -->
          <!-- Each Value -->
          <div class="d-flex flex-column mr-4 mb-1">
            <span class="my-1 d-inline">
              <strong class="text-small">نماد ارز</strong>
            </span>
            <div class="d-flex flex-row ml-1 flex-wrap align-items-center">
              <span
                class="pi pi-circle-fill text-primary m-1"
                style="font-size: 0.82rem"
              ></span>
              <input
                (input)="changeValue('currencySymbol', $event.target.value)"
                type="text"
                class="form-control radius text-small border-0"
                value="{{ countryDetail.currencySymbol }}"
              />
            </div>
          </div>
          <!-- Each Value -->
          <div class="d-flex flex-column mr-4 mb-1">
            <span class="my-1 d-inline">
              <strong class="text-small">نام کشور(انگلیسی)</strong>
            </span>
            <div class="d-flex flex-row ml-1 flex-wrap align-items-center">
              <span
                class="pi pi-circle-fill text-primary m-1"
                style="font-size: 0.82rem"
              ></span>
              <input
                (input)="changeValue('title', $event.target.value)"
                type="text"
                class="form-control radius text-small border-0"
                value="{{ countryDetail.title }}"
              />
            </div>
          </div>

          <div class="d-flex flex-column mr-4 mb-1">
            <span class="my-1 d-inline">
              <strong class="text-small">عنوان در مرورگر</strong>
            </span>
            <div class="d-flex flex-row ml-1 flex-wrap align-items-center">
              <span
                class="pi pi-circle-fill text-primary m-1"
                style="font-size: 0.82rem"
              ></span>
              <input
                (input)="changeValue('browserTitle', $event.target.value)"
                value="{{ countryDetail.browserTitle }}"
                type="text"
                class="form-control radius text-small border-0"
              />
            </div>
          </div>
        </div>
        <!-- ================[ستون سمت چپ]======== -->
        <div class="d-flex flex-column flex-wrap">
          <div class="d-flex flex-column mr-4 mb-1">
            <span class="my-1 d-inline">
              <strong class="text-small">متا دسکریپشن</strong>
            </span>
            <div class="d-flex flex-row ml-1 flex-wrap align-items-center">
              <textarea
                (input)="changeValue('metaDescription', $event.target.value)"
                value="{{ countryDetail.metaDescription }}"
                type="text"
                class="form-control radius w-91"
              >
              </textarea>
            </div>
          </div>

          <div class="my-2 w-53">
            <ng-container *ngIf="loadMultiSelect">
              <label>هشتک ها</label>
              <p-multiSelect
                dir="ltr"
                [options]="tags"
                [(ngModel)]="selectedTags"
                optionLabel="name"
                display="chip"
              ></p-multiSelect
            ></ng-container>
          </div>
          <div class="mb-4">
            <button
              (click)="setTags()"
              class="btn-save btn d-inline-flex justify-content-around my-2"
            >
              <i class="i-Yes text-bigger margin-icon"></i>
              <span>تائید</span>
            </button>
          </div>

          <ckeditor
            (ready)="onReady($event)"
            [editor]="CkEditor.Editor"
            [(ngModel)]="countryDetail.description"
          >
          </ckeditor>
        </div>
      </div>
    </div>
    <div class="d-flex flex-grow-1"></div>
    <div class="modal-footer border-0 row-footer">
      <div>
        <button
          *ngIf="hideUpdateBtn"
          type="button"
          class="btn-update"
          (click)="openUpdateModal(updateModal, countryDetail.id)"
        >
          <p class="margin-0">به روز رسانی اندیکاتورها</p>
          <div class="spiner-btn">
            <i class="pi pi-history"></i>
          </div>
        </button>
      </div>
      <div>
        <button
          *appCanAccess="'Calendar-Countries-Edit'"
          (click)="putCountry()"
          type="button"
          class="btn-save btn d-inline-flex justify-content-around py-btns radius align-items-center ml-2 float-right"
        >
          <i class="i-Yes text-bigger mr-2"></i
          ><strong class="text-small">ذخیره</strong>
        </button>
        <button
          (click)="modal.dismiss()"
          type="button"
          class="btn-filter btn d-inline-flex justify-content-around py-btns radius align-items-center ml-2 float-right"
        >
          <i class="i-Close text-bigger mr-2"></i
          ><strong class="text-small">انصراف</strong>
        </button>
      </div>
    </div>
  </div>
</ng-template>

<!-- =========[مدال به روز رسانی]====== -->

<ng-template let-modal #updateModal>
  <div class="row-spiner">
    <p class="font-size-135">
      لطفا تا اتمام فرایند به روز رسانی در صفحه بمانید
    </p>
    <div class="">
      <p-progressSpinner ariaLabel="loading"></p-progressSpinner>
    </div>
  </div>
</ng-template>
