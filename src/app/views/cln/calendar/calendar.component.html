<div class="content">
  <div class="table-responsive custom-table-responsive">
    <table class="table custom-table">
      <thead>
        <tr>
          <th>
            <span class="d-flex align-items-center"
              ><span class="pi pi-calendar"></span>&nbsp;تاریخ</span
            >
          </th>
          <th>ارز</th>
          <th>
            <span class="d-flex pi pi-clock" style="padding-bottom: 3px"></span>
          </th>
          <th>توضیح خبر</th>
          <th>اهمیت</th>
          <th class="text-center">پیش‌بینی</th>
          <th class="text-center">واقعی</th>
          <th class="text-center">قبلی</th>
        </tr>
      </thead>
      <tbody>
        <ng-container
          *ngFor="
            let item of eventData
              | paginate
                : {
                    itemsPerPage: page.size,

                    currentPage: page.pageNumber,
                    totalItems: page.totalElements
                  }
          "
        >
          <tr
            scope="row"
            (click)="openModal(detailsModal, 'lg', true, item)"
            class="cursor-pointer"
          >
            <td>Tue May 09</td>
            <td><span class="fi fi-us fib"></span>&nbsp; USD</td>
            <td>02:31</td>
            <td>{{ item.name }}</td>
            <td>
              <span class="d-inline-flex align-items-center">
                <span
                  class="pi pi-circle-fill"
                  [ngClass]="{
                    'text-dark': item.importance == 0,
                    'blinking-med text-warning': item.importance == 3,
                    'blinking-slow text-light': item.importance == 1,
                    'blinking-fast text-danger': item.importance == 2
                  }"
                ></span
                >&nbsp;&nbsp;{{ item.importance | importance }}
              </span>
            </td>
            <td class="text-center">-</td>
            <td class="text-center">-</td>
            <td class="text-center">-</td>
          </tr>
          <tr class="spacer">
            <td colspan="100"></td>
          </tr>
        </ng-container>
      </tbody>
    </table>
  </div>
</div>
<div class="col-md-12 mt-3" *ngIf="page.totalElements > 25">
  <pagination-controls
    (pageChange)="setPage($event, null)"
    previousLabel=""
    nextLabel=""
    responsive="true"
  ></pagination-controls>
</div>
<ng-template let-modal #detailsModal>
  <div class="shadow-lg radius modal-height d-flex flex-column flex-wrap">
    <div class="modal-header border-0">
      <div class="w-75 h-custom-header">
        <span class="d-inline-flex align-items-center">
          <span class="pi pi-circle-fill text-dark text-bigger"></span>&nbsp;
        </span>
        <input
          (click)="onFocusIn()"
          type="text"
          class="form-control-sm radius w-75 text-small disabled-title-input"
          *ngIf="!changing"
          value="{{ eventNameHolder }}"
        />
        <input
          value="{{ eventNameHolder }}"
          [(ngModel)]="eventDetails.name"
          autocomplete="off"
          *ngIf="changing"
          type="text"
          id="enabledInput"
          (focusout)="onFocusOut()"
          class="form-control-sm radius w-75 text-small enabled-title-input"
        />
        <div class="d-block">
          <span
            *ngIf="changing"
            ngbTooltip="انصراف"
            [openDelay]="50"
            [closeDelay]="150"
            placement="bottom"
            class="d-inline-flex mt-2 p-2 radius bg-light"
            (click)="changing = fasle; eventDetails.name = eventNameHolder"
            ><i class="i-Close text-bigger text-black"></i
          ></span>
          <span
            *ngIf="changing"
            (click)="eventNameHolder = eventDetails.name; changing = false"
            ngbTooltip="ثبت"
            [openDelay]="50"
            [closeDelay]="150"
            placement="bottom"
            class="d-inline-flex mt-2 p-2 radius btn-save ml-2"
            ><i class="i-Yes text-bigger text-black"></i
          ></span>
        </div>
      </div>
      <button
        ngbAutoFocus
        type="button"
        class="close"
        aria-label="Close"
        (click)="eventDetails.name = eventNameHolder; modal.dismiss()"
      >
        <span style="font-size: 1.7rem" aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <div class="d-flex flex-row flex-wrap">
        <!-- Each Value -->
        <div class="d-flex flex-column mr-4 mb-1">
          <div class="d-flex align-items-center justify-content-start mb-1">
            <span
              class="pi pi-circle-fill text-light m-1"
              style="font-size: 0.82rem"
            ></span
            ><label class="my-1 text-small" for="type">نوع خبر</label>
          </div>
          <span class="card py-2 px-4 radius bg-light"
            ><strong class="text-small">
              {{ eventDetails.type | eventType }}
            </strong></span
          >
        </div>
        <!-- Each Value -->
        <!-- Each Value -->
        <div class="d-flex flex-column mr-4 mb-1">
          <div class="d-flex align-items-center justify-content-start mb-1">
            <span
              class="pi pi-circle-fill text-light m-1"
              style="font-size: 0.82rem"
            ></span
            ><label class="my-1 text-small" for="type">حالت زمان</label>
          </div>
          <span class="card py-2 px-4 radius bg-light"
            ><strong class="text-small">
              {{ eventDetails.timeMode | timeMode }}
            </strong></span
          >
        </div>
        <!-- Each Value -->

        <!-- Each Value -->
        <div class="d-flex flex-column mr-4 mb-1">
          <div class="d-flex align-items-center justify-content-start mb-1">
            <span
              class="pi pi-circle-fill text-light m-1"
              style="font-size: 0.82rem"
            ></span
            ><label class="my-1 text-small" for="type">بخش مربوطه</label>
          </div>
          <span class="card py-2 px-4 radius bg-light"
            ><strong class="text-small">
              {{ eventDetails.sector | sector }}
            </strong></span
          >
        </div>
        <!-- Each Value -->

        <!-- Each Value -->
        <div class="d-flex flex-column mr-4 mb-1">
          <div class="d-flex align-items-center justify-content-start mb-1">
            <span
              class="pi pi-circle-fill text-light m-1"
              style="font-size: 0.82rem"
            ></span
            ><label class="my-1 text-small" for="type">معیار محاسبه</label>
          </div>
          <span class="card py-2 px-4 radius bg-light"
            ><strong class="text-small">
              {{ eventDetails.unit | unit }}
            </strong></span
          >
        </div>
        <!-- Each Value -->

        <!-- Each Value -->
        <div class="d-flex flex-column mr-4 mb-1">
          <div class="d-flex align-items-center justify-content-start mb-1">
            <span
              class="pi pi-circle-fill text-light m-1"
              style="font-size: 0.82rem"
            ></span
            ><label class="my-1 text-small" for="type">دوره تناوب</label>
          </div>
          <span class="card py-2 px-4 radius bg-light"
            ><strong class="text-small">
              {{ eventDetails.frequency | frequency }}
            </strong></span
          >
        </div>
        <!-- Each Value -->

        <!-- Each Value -->
        <div class="d-flex flex-column mr-4 mb-1">
          <div class="d-flex align-items-center justify-content-start mb-1">
            <span
              class="pi pi-circle-fill text-light m-1"
              style="font-size: 0.82rem"
            ></span
            ><label class="my-1 text-small" for="type">اهمیت خبر</label>
          </div>
          <span
            class="card py-2 px-4 radius"
            [ngClass]="{
              'bg-danger text-white': eventDetails.importance == 2,
              'bg-light': eventDetails.importance == 1,
              'bg-warning': eventDetails.importance == 3,
              'bg-dark': eventDetails.importance == 0
            }"
            ><strong class="text-small">
              {{ eventDetails.importance | importance }}
            </strong></span
          >
        </div>
        <!-- Each Value -->

        <!-- Each Value -->
        <div class="d-flex flex-column mr-4 mb-1">
          <div class="d-flex align-items-center justify-content-start mb-1">
            <span
              class="pi pi-circle-fill text-light m-1"
              style="font-size: 0.82rem"
            ></span
            ><label class="my-1 text-small" for="type">مضرب</label>
          </div>
          <span class="card py-2 px-4 radius bg-light"
            ><strong class="text-small">
              {{ eventDetails.multiplier | multiplier }}
            </strong></span
          >
        </div>
        <!-- Each Value -->
      </div>

      <!-- CKEDITOR -->

      <div class="row my-3">
        <hr class="d-flex flex-grow-1" style="margin: 13px 10px 13px 8px" />
        <div class="col-auto">
          <strong class="text-small">پیش نمایش</strong>
        </div>
        <hr class="d-flex flex-grow-1" style="margin: 13px 8px 13px 10px" />
      </div>
      <ckeditor
        (paste)="onPasteEditor($event)"
        (change)="onChangeEditor($event)"
        name="myckeditor"
        [config]="ckeConfig"
        debounce="100"
        [(ngModel)]="eventDetails.description"
      >
      </ckeditor>

      <!-- CKEDITOR -->
    </div>

    <div class="d-flex flex-grow-1"></div>
    <div class="modal-footer border-0">
      <button
        (click)="putEvent()"
        type="button"
        class="btn-save btn d-inline-flex justify-content-around py-btns radius align-items-center ml-2 float-right"
      >
        <i class="i-Yes text-bigger mr-2"></i
        ><strong class="text-small">ذخیره</strong>
      </button>
      <button
        (click)="modal.close(false)"
        type="button"
        class="btn-filter btn d-inline-flex justify-content-around py-btns radius align-items-center ml-2 float-right"
      >
        <i class="i-Close text-bigger mr-2"></i
        ><strong class="text-small">انصراف</strong>
      </button>
    </div>
  </div>
</ng-template>
<input
  type="file"
  placeholder="Voice"
  (input)="changeVoicePath($event.target.files[0])"
/>
<button class="btn btn-light" (click)="uploadVoice()">آپلود</button>
